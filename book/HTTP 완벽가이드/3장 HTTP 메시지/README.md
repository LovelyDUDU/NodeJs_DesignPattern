# 3장 HTTP 메시지

내용

- 메시지가 어떻게 흘러가는가
- HTTP 메시지의 세 부분(시작줄, 헤더, 개체 본문)
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능(메서드)들
- 응답 메시지가 반환하는 여러 상태 코드들
- 여러 HTTP 헤더들은 무슨 일을 하는가

</br>

## 3.1 메시지의 흐름

### 3.1.1 메시지는 원 서버 방향을 인바운드로 하여 송신된다.

인바운드 = 서버 방향

아웃바운드 = 사용자 에이전트 방향

</br>

### 3.1.2 다운스트림으로 흐르는 메시지

모든 메시지는 다운스트림으로 흐른다.

<hr>

## 3.2 메시지의 각 부분
HTTP 메시지는 단순한 데이터의 구조화된 블럭으로 시작줄, 헤더 블록, 본문 으로 이루어진다. 시작줄은 이것이 어떤 메시지인지 서술하며, 헤더 블록은 속성을, 본문은 데이터를 담고있다. 본문은 없을 수도 있다.

</br>

### 3.2.1 메시지 문법
모든 HTTP 메시지는 요청(Request) 메시지와 응답(Response) 메시지로 분류된다. 요청 메시지는 웹 서버에 어떤 동작을 요구한다. 응답 메시지는 요청의 결과를 클라이언트에게 돌려준다.

요청 메시지는 <메서드>, <요청 URL>, <버전>, <헤더>, <엔터티 본문>으로 이루어지고, 

응담 메시지는 <버전>, <상태코드>, <사유 구절> (reason-phrase), <헤더>, <엔터티 본문>으로 이루어진다.

</br>

### 3.2.2 시작줄
모든 HTTP 메시지는 시작줄로 시작한다. 요청 메시지의 시작줄은 무엇을 해야 하는지 말해주고, 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다.

요청 메시지의 시작줄에는 서버에서 어떤 동작이 일어나야 하는지 설명해주는 메서드와 그 동작에 대한 대상을 지칭하는 요청 URL이 들어있다. 또한 클라이언트가 어떤 HTTP 버전으로 말하고 있는지 서버에게 알려주는 HTTP 버전도 포함한다.

응답 메시지의 시작줄에는 응답 메시지에 쓰인 HTTP의 버전, 숫자로 된 상태코드, 수행 상태에 대해 설명해주는 텍스트로 된 사유 구절이 들어있다.

메서드 : 서버에게 무엇을 해야 하는지 말해준다.

상태코드 : 클라이언트에게 무엇이 일어났는지 말해준다.

사유 구절 : 상태 코드에 대한 글로 된 설명을 제공한다.

버전 변호 : HTTP 애플리케이션들이 자신이 따르는 프로토콜의 버전을 상대방에게 말해주기 위한 수단이다.

</br>

### 3.2.3 헤더
HTTP 헤더 필드는 요청과 응답 메시지에 추가 정보를 더한다. 기본적으로 이름/값 쌍의 목록이다. 
헤더는 일반 헤더, 요청 헤더, 응답 헤더, Entity헤더, 확장 헤더 등 으로 분류된다.

</br>

### 3.2.4 엔터티 본문
엔터티 본문은 HTTP 메시지의 화물이라고 할 수 있다. 이미지, 비디오, html, 등 다양한 데이터를 실어 나를 수 있다.

<hr>

## 3.3 메서드

### 3.3.1 안전한 메서드
GET, HEAD 를 말한다. 이는 HTTP요청의 결과로 서버에 어떤 작용도 없다.

### 3.3.2 GET
주로 서버에게 리소스를 달라고 요청하기 위해 쓰인다.

### 3.3.3 HEAD
GET 처럼 행동하지만, 서버는 응답으로 헤더만을 돌려준다. (본문은 반환하지 않는다는 뜻이다.)

### 3.3.4 PUT
서버에 문서를 쓰는 메서스다. 

### 3.3.5 POST
서버에 입력 데이터를 전송하기 위해 설계되었다. POST는 서버에 데이터를 보내기 위해 사용하고, PUT은 서버에 있는 리소스(파일 등)에 데이터를 입력하기 위해 사용한다.

### 3.3.6 TRACE
TRACE 메서드는 클라이언트에게 자신의 요청이 서버에 도달했을 떄 어떻게 보이게 되는지 알려준다. 

### 3.3.7 OPTIONS
웹 서버에게 여러가지 종류의 지원 범위에 대해 물어본다. 서버에게 특정 리소스에 대해 어떤 메서드가 지원되는지 물어볼 수 있다.

### 3.3.8 DELELTE
서버에게 요청 URL로 지정한 리소스를 삭제할 것을 요청한다.

### 3.3.9 확장 메서드
기본적으로 제공되는 메서드 이외에 추가적으로 메서드를 확장할 수도 있다고 한다.

<hr>

## 3.4 상태 코드
상태코드는 클라이언트에게 서버의 트랜잭션을 이해할 수 있는 쉬운 방법을 제공한다.

100 ~ 199 : 정보성 상태코드

200 ~ 299 : 성공 상태코드

300 ~ 399 : Redirection 상태 코드

400 ~ 499 : 클라이언트 에러 상태 코드

500 ~ 599 : 서버 에러 상태 코드

<hr>

## 3.5 헤더

헤더와 메서드는 클라이언트와 서버가 무엇을 하는지 결정하기 위해 함께 사용된다. 

일반 헤더 (General Headers) : 클라이언트와 서버 양쪽 모두가 사용한다. (ex Date: True, 3 Oct 1974 02:16:00 GMT)

요청 해더 (Request Headers) : 서버에게 클라이언트가 받고자 하는 데이터의 타입이 무엇인지와 같은 부가 정보를 제공한다. (ex Accept: `*`/`*`)

응답 헤더 (Response Headers) : 클라이언트에게 정보 제공을 위한 자신만의 헤더이다. (ex Server: Tiki-Hut/1.0 -> Tiki Hut tjqj 1.0 버전과 통신중)

엔터티 헤더 (Entity Headers) : 엔터티 본문에 들어있는 데이터의 타입이 무엇인지 알려준다 (ex Content-Type: application/json)

확장 헤더 (Extension Headers) : (비표준헤더)
