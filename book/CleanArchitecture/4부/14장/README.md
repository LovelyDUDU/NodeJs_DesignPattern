# 14장 컴포넌트 결합
세 가지 원칙에 대해서 설명할 예정이다. 세 원칙은 컴포넌트 사이의 관계를 설명한다.

</br>

### ADP: 의존성 비순환 원칙
컴포넌트 의존성 그래프에 순환(cycle)이 있어서는 안된다. 

컴포넌트 간의 의존성 구조는 **비순환 방향 그래프**여야 한다.

컴포넌트 간의 의존성 구조에 순환 의존성이 생긴다면 다음의 두가지 주요 메커니즘을 사용하여 순환을 끊어야 한다.

`Interactors -> Entities -> Authorizer -> Interactors ...`

1. 의존성 역전 원칙을 적용한다.
2. 순환 의존성이 발생하는 곳에 새로운 컴포넌트를 만든다.

#### 1. 의존성 역전 원칙 사용
Entities와 Authorizer 사이의 의존성을 역전시킨다.
- Entities의 `User`가 필요로 하는 메서드를 제공하는 인터페이스를 생성하고,
- 이 인터페이스는 Entities에 위치시키고,
- Authorizer에서는 이 인터페이스를 상속받는다.

#### 2. 새로운 컴포넌트
Entities 와 Authroizer가 모두 의존하는 새로운 컴포넌트를 만든다. 그리고 두 컴포넌트가 모두 의존하는 클래스들을 새로운 컴포넌트로 이동시킨다.

</br>

### 하향식 설계 (top-down)
컴포넌트 구조는 하향식으로 설계될 수 없다.

(top-down 하향식: 가장 큰것 부터 계획하고 뼈대를 만들어서 진행하는 것) </br>
(bottom-up 상향식: 작은 구성부터 만들어서 마지막에 이어 붙이는 방식)

</br>

### SDP: 안정된 의존성 원칙
안정된 방향으로 (더 안정된 쪽에) 의존하라.

모든 컴포넌트가 안정적이어야 하는 것은 아니다.

stable한 컴포넌트는 안정적이어야 하고, 안정적인 컴포넌트는 다른 컴포넌트에 의존하지 말아야 한다. (의존한다는 것은 다른 컴포넌트를 가져다 사용한다는 것과 동일하다.)


</br>

### CRP: 공통 재사용 원칙
컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.

같이 재사용되는 경향이 있는 클래스와 모듈들은 같은 컴포넌트에 포함해야 한다.

의존하는 컴포넌트가 있다면 해당 컴포넌트의 모든 클래스에 대해 의존함을 확실히 인지하자.

**강하게 결합되지 않은 클래스들을 동일한 컴포넌트에 위치시켜서는 안된다.**


</br>

### 결론

어느 클래스들을 묶어서 컴포넌트로 만들지를 결정할 때, 재사용성과 개발가능성을 충분히 고려하자. 한쪽에 치우쳐지는 것은 좋지 않다.